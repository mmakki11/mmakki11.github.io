<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Begin Jekyll SEO tag v2.4.0 -->
    <title>LAB 10</title>
    <meta name="generator" content="Jekyll v3.7.3" />
    <meta property="og:title" content="Mahdi Makki, Hunter College" />
    <meta property="og:locale" content="en_US" />
    <link rel="canonical" href="https://mmakki11.github.io/" />
    <meta property="og:url" content="https://mmakki11.github.io/" />
    <meta property="og:site_name" content="mmakki11.github.io" />
    <script type="application/ld+json">
      {
        "name": "mmakki11.github.io",
        "@type": "WebSite",
        "url": "https://mmakki11.github.io/",
        "headline": "Mahdi Makki, Hunter College",
        "@context": "http://schema.org"
      }
    </script>
    <!-- End Jekyll SEO tag -->

    <link
      href="https://fonts.googleapis.com/css?family=Poppins:400"
      rel="stylesheet"
    />

    <!-- MathJax -->
    <script
      type="text/javascript"
      async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML"
    ></script>

    <!--   <link crossorigin="anonymous" media="all" integrity="sha512-Z0JAar9+DkI1NjGVdZr3GivARUgJtA0o2eHlTv7Ou2gshR5awWVf8QGsq11Ns9ZxQLEs+G5/SuARmvpOLMzulw==" rel="stylesheet" href="https://assets-cdn.github.com/assets/frameworks-95aff0b550d3fe338b645a4deebdcb1b.css" />
    -->
    <!--   <link crossorigin="anonymous" media="all" integrity="sha512-yv+kWn8ewbavFKfvLZifQplJ0chJ6H894rDwGVvn0LtaG80VxAQmPt8pRMMOSlGNSiPwZEDSVzZjyOOiVe0eyA==" rel="stylesheet" href="https://assets-cdn.github.com/assets/github-37504d684728c80db863d719b4ac6781.css" />
    -->
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      <style>
        table {
          border-collapse: collapse;
        }
        table,
        td,
        th {
          text-align: left;
          padding: 8px;
          padding-bottom: 6px;
          border: 1px solid #dee1e4;
        }
        tr:nth-child(even) {
          background-color: #fafafa;
        }
        tr:nth-child(odd) {
          background-color: #ffffff;
        }
        hr.style-six {
          border: 0;
          height: 0;
          border-top: 1px solid rgba(0, 0, 0, 0.1);
          border-bottom: 1px solid rgba(255, 255, 255, 0.3);
        }
        a:link {
          text-decoration: none;
        }
        a:visited {
          text-decoration: none;
          color: blue;
        }
        a:hover {
          text-decoration: none;
        }
        a:active {
          text-decoration: none;
        }
      </style>

      <h2 id="lab-10">LAB 10</h2>

      <p>
        Today’s lab will focus on random numbers, indefinite loops, and finding
        errors.
      </p>

      <p>
        Software tools needed: web browser and Python IDLE programming
        environment with the pandas, numpy, and folium package installed.
      </p>

      <h3 id="in-class-quiz">In-class Quiz</h3>

      <p>
        During lab, there is a <a href="quizzes.html">quiz</a>. The password to
        access the quiz will be given during lab. To complete the quiz, log on
        to Blackboard (see <a href="lab_01.html">Lab 1</a> for details on using
        Blackboard).
      </p>

      <h3 id="random-range">Random Range</h3>

      <p>
        Python has a built-in library for generating random numbers. To use it,
        you include at the top of your file:
      </p>

      <div class="language-plaintext highlighter-rouge">
        <div class="highlight">
          <pre class="highlight"><code>import random
</code></pre>
        </div>
      </div>

      <p>
        The random library includes a function that’s similar to range, called
        randrange. As with range, you can specify the starting, stopping, and
        step values, and the function randrange chooses a number at random in
        that range. Some examples:
      </p>

      <ul>
        <li>
          <code class="language-plaintext highlighter-rouge"
            >random.randrange(5) returns one of 0,1,2,3,4</code
          >
        </li>
        <li>
          <code class="language-plaintext highlighter-rouge"
            >random.randrange(1,10,2) returns one of 1,3,5,7,9</code
          >
        </li>
        <li>
          <code class="language-plaintext highlighter-rouge"
            >random.randrange(360) returns one of 0,1,2,...,359</code
          >
        </li>
      </ul>

      <p>Let’s use that last example to have our turtle make a random walk:</p>
      <iframe
        width="100%"
        height="400"
        frameborder="1"
        src="https://trinket.io/embed/python/ab6cddc880"
      ></iframe>
      <p><br /></p>

      <p>
        Notice that our turtle turns a degrees, where a is chosen at random
        between 0 and 359 degrees. What if your turtle was in a city and had to
        stay on a grid of streets (and not ramble through buildings)? How can
        you change the randrange() to choose only from the numbers: 0,90,180,270
        (submit your answer as Problem #10).
      </p>

      <h3 id="indefinite-loops">Indefinite Loops</h3>

      <p>
        We have been using for-loops to repeat tasks a fixed number of times
        (often called a <em>definite loop</em>). There is another type of loop
        that repeats while a condition holds (called a
        <em>indefinite loop</em>). The most common is a while-loop.
      </p>

      <div class="language-plaintext highlighter-rouge">
        <div class="highlight">
          <pre class="highlight"><code>while condition:
   command1
   command2
   ...
   commandN
</code></pre>
        </div>
      </div>

      <p>
        While the condition is true, the block of commands nested under the
        while statement are repeated.
      </p>

      <p>
        For example, let’s have a turtles continue their random walk as long as
        their x and y values are within 50 of the starting point (to keep them
        from wandering off the screen):
      </p>
      <iframe
        width="100%"
        height="400"
        frameborder="1"
        src="https://trinket.io/embed/python/6738c47304"
      ></iframe>
      <p><br /></p>

      <p>
        Indefinite loops are useful for simulations (like our simple random walk
        above) and checking input. For example, the following code fragment:
      </p>

      <div class="language-plaintext highlighter-rouge">
        <div class="highlight">
          <pre class="highlight"><code>age = int(input('Please enter age: '))
while age &lt; 0:
    print('Entered a negative number.')
    age = int(input('Please enter age: '))
print('You entered your age as:', age)
</code></pre>
        </div>
      </div>

      <p>
        will ask the user for their age, and continue asking until the number
        they entered is non-negative (<a
          href="http://pythontutor.com/visualize.html#code=age%20%3D%20int%28input%28'Please%20enter%20age%3A%20'%29%29%0Awhile%20age%20%3C%200%3A%0A%20%20%20%20print%28'Entered%20a%20negative%20number.'%29%0A%20%20%20%20age%20%3D%20int%28input%28'Please%20enter%20age%3A%20'%29%29%0Aprint%28'You%20entered%20your%20age%20as%3A',%20age%29&amp;cumulative=false&amp;curInstr=0&amp;heapPrimitives=false&amp;mode=display&amp;origin=opt-frontend.js&amp;py=3&amp;rawInputLstJSON=%5B%22-3%22,%223%22%5D&amp;textReferences=false"
          >example in pythonTutor</a
        >).
      </p>

      <h3 id="finding-errors">Finding Errors</h3>

      <p>
        Finding, and fixing errors, in your programs is a very useful skill.
        Let’s look at a program with lots of errors and work through how to
        identify the issues and fix them. If you cloned the repo above, you will
        have a copy of <a href="images/errors.py">errors.py</a> on your
        computer. When loaded into IDLE, it does not run:
      </p>

      <div class="language-plaintext highlighter-rouge">
        <div class="highlight">
          <pre
            class="highlight"
          ><code># errors.py is based on dateconvert2.py from Chapter 5 of the Zelle textbook
#     Converts day month and year numbers into two date formats

def main()
    # get the day month and year
    day, month year = eval(input("Please enter day, month, and year numbers: ")

    date1 = str(month)"/"+str(day)+"/"+str(year)

    months = ["January", "February", "March", "April", 
              "May", "June", "July", "August", 
              "September", "October", "November", "December"]
    monthStr = months[-1]
    date2 = monthStr+" " + str(day) + ",  + str(year)

    print("The date is" date1, "or", date2+".")

main()
</code></pre>
        </div>
      </div>

      <p>Instead, a dialog box pops up and says “invalid syntax”:</p>

      <p><img src="images/errorWindow1.jpg" alt="" /></p>

      <p>
        The red line indicates where the intepreter has found an error. Can you
        tell what it is? Syntax is another word for grammar, so, it most likely
        missing punctuation or a misspelling of some sort. We have spelled def
        correctly and have the right number of parenthesis, so, what else is
        missing?
      </p>

      <p>
        The answer is after the parenthesis on a function definition, a colon is
        required. Add that in:
      </p>

      <div class="language-plaintext highlighter-rouge">
        <div class="highlight">
          <pre class="highlight"><code>def main():
</code></pre>
        </div>
      </div>

      <p>and try to run the program again.</p>

      <p>Again, we get a dialog box:</p>

      <p><img src="images/errorWindow2.jpg" alt="" /></p>

      <p>
        Instead of the whole line being highlighted, only the word year is. The
        Python intepreter was not expecting year and says there is a grammatical
        mistake. Since year does not include any grammatical constructs, we need
        to look <em>before</em> the message to see where the error is. Do you
        see it?
      </p>

      <p>
        The answer is lists of variables need commas in between them to
        distinguish one from the next. Add the comma in:
      </p>

      <div class="language-plaintext highlighter-rouge">
        <div class="highlight">
          <pre class="highlight"><code>day, month, year = ...
</code></pre>
        </div>
      </div>

      <p>and try to run the program again.</p>

      <p>Once more we get a dialog box:</p>

      <p><img src="images/errorWindow3.jpg" alt="" /></p>

      <p>
        It has highlighted the first item, date1 on the line. That is a name and
        looks fine. So, as above, let’s look before the highlighted error to see
        if there’s a problem. The line above it is:
      </p>

      <div class="language-plaintext highlighter-rouge">
        <div class="highlight">
          <pre
            class="highlight"
          ><code>day, month, year = eval(input("Please enter day, month, and year numbers: ")
</code></pre>
        </div>
      </div>

      <p>
        It did not highlight this line, so, the problem must be at the end. Do
        you see it?
      </p>

      <p>
        The answer is we are missing a closing parenthesis. The line has two
        left parenthesis but only one right parenthesis. Add the right
        parenthesis in:
      </p>

      <div class="language-plaintext highlighter-rouge">
        <div class="highlight">
          <pre class="highlight"><code>... and year numbers: "))
</code></pre>
        </div>
      </div>

      <p>and try to run the program again.</p>

      <p>Again, we get a dialog box:</p>

      <p><img src="images/errorWindow4.jpg" alt="" /></p>

      <p>
        The intepreter does not understand the second “ on the line. Why? What
        is this line doing? It’s constructing a string and storing it in the
        variable date1. How do you build a string out of smaller strings?
      </p>

      <p>
        The answer is to put smaller strings together (called concatenation) we
        need to use the plus sign (+). The line is missing a plus sign right
        before the quotes. Add the plus sign in:
      </p>

      <div class="language-plaintext highlighter-rouge">
        <div class="highlight">
          <pre class="highlight"><code>date1 = str(month) + "/" ...
</code></pre>
        </div>
      </div>

      <p>and try to run the program again.</p>

      <p>Again, we get a dialog box, but this one has a different message:</p>

      <p><img src="images/errorWindow5.jpg" alt="" /></p>

      <p>
        EOL means “End of the line”, so, the message says that the end of the
        line was reached before you finished defining the string. How can you
        fix this?
      </p>

      <p>
        The answer is to end the string, using quotation marks. The line is
        missing a quotation mark at the very end. Add the quotation mark :
      </p>

      <div class="language-plaintext highlighter-rouge">
        <div class="highlight">
          <pre class="highlight"><code>...+ ",  + str(year)"
</code></pre>
        </div>
      </div>

      <p>and try to run the program again.</p>

      <p>Our familiar dialog box returns:</p>

      <p><img src="images/errorWindow6.jpg" alt="" /></p>

      <p>We have seen this type of error before. How do you fix it?</p>

      <p>
        The answer is lists of arguments need commas in between them to
        distinguish one from the next. Add the comma in:
      </p>

      <div class="language-plaintext highlighter-rouge">
        <div class="highlight">
          <pre class="highlight"><code>... date is", date1 ...
</code></pre>
        </div>
      </div>

      <p>and try to run the program again.</p>

      <p>It runs! Now let’s make sure it works. Type in at the prompt:</p>

      <p>Please enter day, month, and year numbers: 31, 12, 2014</p>

      <p>Uh oh, instead of output, we get the following messages:</p>

      <p>Traceback (most recent call last):</p>

      <div class="language-plaintext highlighter-rouge">
        <div class="highlight">
          <pre
            class="highlight"
          ><code>  File "/Users/mmakki11/Desktop/errors.py", line 18, in main()
  File "/Users/mmakki11/Desktop/errors.py", line 13, in main
    monthStr = months\[month+1\]
IndexError: list index out of range 
</code></pre>
        </div>
      </div>

      <p>When you see messages like this, go to the very last line:</p>

      <div class="language-plaintext highlighter-rouge">
        <div class="highlight">
          <pre class="highlight"><code>IndexError: list index out of range
</code></pre>
        </div>
      </div>

      <p>
        It says that the index for our list is out of range. An index is the
        item of the list that we’re accessing. For example, months[1] has index
        1 and will give us February. The range of the index for a list is 0 to
        one less than the length of the list. In the case of months, the range
        is [0,1,2,…,11]. What went wrong when we entered 12 for our month?
      </p>

      <p>The answer is we used month+1 = 12 + 1 = 13 as the index:</p>

      <div class="language-plaintext highlighter-rouge">
        <div class="highlight">
          <pre class="highlight"><code>monthStr = months[month+1]
</code></pre>
        </div>
      </div>

      <p>
        which is out of range. What do we want instead? Instead of adding 1, we
        should subtract 1. Change it in the program:
      </p>

      <div class="language-plaintext highlighter-rouge">
        <div class="highlight">
          <pre class="highlight"><code>monthStr = months[month-1]
</code></pre>
        </div>
      </div>

      <p>and try to run the program again.</p>

      <p>It still runs, but does it work? Let’s try the same input again:</p>

      <div class="language-plaintext highlighter-rouge">
        <div class="highlight">
          <pre
            class="highlight"
          ><code>Please enter day, month, and year numbers: 31, 12, 2014
The date is 12/31/14 or December 31,  + str(year).
</code></pre>
        </div>
      </div>

      <p>
        Something odd is happening at the end –
        <code class="language-plaintext highlighter-rouge">str(year)</code> does
        not look right. Let’s look at the print statement:
      </p>

      <div class="language-plaintext highlighter-rouge">
        <div class="highlight">
          <pre
            class="highlight"
          ><code>date2 = monthStr+" " + str(day) + ",  + str(year)"
</code></pre>
        </div>
      </div>

      <p>
        The intepreter is treating
        <code class="language-plaintext highlighter-rouge">, \+ str(year)</code>
        as a string (instead of evaluating
        <code class="language-plaintext highlighter-rouge">str(year)</code>),
        so, we must have put the quotation mark in the wrong place before. Let’s
        move it:
      </p>

      <div class="language-plaintext highlighter-rouge">
        <div class="highlight">
          <pre
            class="highlight"
          ><code>date2 = monthStr+" " + str(day) + ","  + str(year)
</code></pre>
        </div>
      </div>

      <p>and try to run the program again.</p>

      <p>
        Success! But try a few other inputs, just to make sure. It is always
        good to try cases that are near the ‘boundary’ of what’s allowed, since
        those are the places we are most likely to make mistakes:
      </p>

      <div class="language-plaintext highlighter-rouge">
        <div class="highlight">
          <pre
            class="highlight"
          ><code>Please enter day, month, and year numbers: 1,1,2015
The date is 1/1/2015 or January 1,2015.

Please enter day, month, and year numbers: 1, 2, 2003
The date is 2/1/03 or February 1,2003.

Please enter day, month, and year numbers: 4, 7, 1976
The date is 7/4/1976 or July 4,1976.
</code></pre>
        </div>
      </div>

      <p>We have removed all the errors, and the program now runs correctly!</p>

      <h3 id="more-on-command-line-scripts">More on Command Line Scripts</h3>

      <p>
        In <a href="lab_06.html">Lab 6</a>, we wrote a simple script that
        prints: Hello, World. We can write scripts that take the shell commands
        we have learned and store them in a file to be used later. In
        <a href="lab_03.html">Lab 3</a>, we introduced the shell, or command
        line, commands to create new directories (folders) and how to list the
        contents of those folders (and expanded on this with relative paths in
        <a href="lab_04.html">Lab 4</a> and absolute paths in
        <a href="lab_05.html">Lab 5</a>).
      </p>

      <p>
        It’s a bit archaic, but we can create the file with the vi editor. It
        dates back to the early days of the Unix operating system. It has the
        advantage that it’s integrated into the Unix operating system and
        guaranteed to be there. It is worth trying at least once (so if you’re
        in a bind and need to edit Unix files remotely, you can), but if you
        hate it (which is likely), use the graphical gEdit (you can find it via
        the search icon on the left hand menu bar).
      </p>

      <p>Let’s create a simple shell script with vi:</p>

      <ol>
        <li>Open a terminal window.</li>
        <li>Type in the terminal window: vi setupProject</li>
        <li>
          To add text to the file, begin by typing i (the letter i) which stands
          for “insert”
        </li>
        <li>
          <p>Type the lines:</p>

          <div class="language-plaintext highlighter-rouge">
            <div class="highlight">
              <pre class="highlight"><code>#Your name here
#October 2017
#Shell script:  creates directories for project
mkdir projectFiles
cd projectFiles
mkdir source
mkdir data
mkdir results
</code></pre>
            </div>
          </div>
        </li>
        <li>
          Click on the ESC (escape key– usually on the upper row of keys) which
          escapes from insert mode.
        </li>
        <li>
          Type:
          <code class="language-plaintext highlighter-rouge">:wq</code> which
          stands for “write my file” and “quit” (the “:” is necessary– it tells
          vi that you want to use the menu commands).
        </li>
        <li>
          This brings us back to the terminal window. Type ls to see a listing
          of the directory, which should include the file,
          <code class="language-plaintext highlighter-rouge">setupProject</code
          >, you just created.
        </li>
        <li>
          <p>
            Next, we’ll change the permissions on the file, so that we can run
            it directly, by just typing its name:
          </p>

          <div class="language-plaintext highlighter-rouge">
            <div class="highlight">
              <pre class="highlight"><code>chmod +x setupProject
</code></pre>
            </div>
          </div>

          <p>(changes the “mode” to be executable).</p>
        </li>
        <li>
          <p>
            To run your shell script, you can now type its name at the terminal:
          </p>

          <div class="language-plaintext highlighter-rouge">
            <div class="highlight">
              <pre class="highlight"><code>./setupProject
</code></pre>
            </div>
          </div>
        </li>
        <li>
          Check to see that your script works, type ls to see the new
          directories your script you created.
        </li>
      </ol>

      <p>
        <strong>Troubles with vi?</strong> It’s not intuitive– here’s more on
        vi:
      </p>

      <ul>
        <li>
          <a
            href="https://www.ibm.com/developerworks/linux/tutorials/l-vi/index.html"
            >IBM tutorial for vi</a
          >
        </li>
        <li>
          <a
            href="http://heather.cs.ucdavis.edu/~matloff/UnixAndC/Editors/ViIntro.html"
            >UC Davis 5-minute Tutorial</a
          >
        </li>
        <li>
          <a href="https://ryanstutorials.net/linuxtutorial/cheatsheetvi.php"
            >Ryan’s Tutorial vi cheat sheet</a
          >
        </li>
      </ul>

      <p>
        If you hate vi, just edit using gEdit (the Linux version of TextEdit) or
        IDLE.
      </p>

      <h3 id="more-on-unix-using-pipes">More on Unix: Using Pipes</h3>

      <p>
        In <a href="lab_06.html">Lab 6</a>, we introduced making short programs,
        or scripts, of Unix commands. In this lab, we introduce a very useful
        construct to let you glue together simple commands to perform more
        complex actions.
      </p>

      <p>
        The command
        <code class="language-plaintext highlighter-rouge">|</code> is called a
        <strong>pipe</strong> since it takes the data flowing out of a command
        and directs it to flow into the next command, much like a pipe directing
        the flow of water.
      </p>

      <p>For example, if you type:</p>

      <div class="language-plaintext highlighter-rouge">
        <div class="highlight">
          <pre class="highlight"><code>ls -l
</code></pre>
        </div>
      </div>

      <p>
        at the prompt, you will see the ‘long’ listing for every file in your
        current directory. (Note that it’s the letter “L”, not the number “1”
        that it looks like on some browsers). For example, if I ran this command
        in my directory for Program 20, I get:
      </p>

      <p><img src="images/lsScreenshot.png" alt="" /></p>

      <p>
        showing 7 files, 6 of which were created in October. Names with ‘/’
        after them are directories or folders. ‘*’ indicates files that can be
        executed (see <a href="lab_06.html">Lab 6</a> for how to change the
        permissions of a file).
      </p>

      <p>
        Let’s use a pipe to count the number of files from October. First, we
        need to take the output from ls and direct it into a program that can
        find patterns. A popular one on Unix is called grep (it searches for
        patterns, which are also called regular expressions or ‘re’– the name
        comes from global search for regular expressions program). Let’s have it
        look for ‘Oct’:
      </p>

      <div class="language-plaintext highlighter-rouge">
        <div class="highlight">
          <pre class="highlight"><code>ls -l | grep "Oct"
</code></pre>
        </div>
      </div>

      <p>
        Note that between the ls -l and the grep “Oct” is a pipe (<code
          class="language-plaintext highlighter-rouge"
          >|</code
        >) that directs the outflow from the ls command to the inflow of the
        grep command:
      </p>

      <p><img src="images/lsGrep.png" alt="" /></p>

      <p>
        We can use the pipe to take the output of the grep command and send it
        to a program that counts the number of lines. This program,
        <code class="language-plaintext highlighter-rouge">wc</code>, counts
        characters, words, and lines. We’ll use the
        <code class="language-plaintext highlighter-rouge">-l</code> option to
        count lines:
      </p>

      <div class="language-plaintext highlighter-rouge">
        <div class="highlight">
          <pre class="highlight"><code>ls -l | grep "Oct" | wc -l
</code></pre>
        </div>
      </div>

      <p>which gives:</p>

      <p><img src="images/lsGrepWC.png" alt="" /></p>

      <p>the number of files in the directory that were last modified.</p>

      <p>
        How could you make a script that counted the number of
        <code class="language-plaintext highlighter-rouge">.py</code> files in
        the directory?
      </p>

      <p>
        When you have the answer, put the single line into a script. Remember to
        use Unix end-of-lines, since gradescope will run what you submit as a
        Unix script and will be very confused if you have non-Unix (i.e.
        Windows-style) end-of-lines. See
        <a href="assignments.html">Programming Problem List</a>.
      </p>

      </ul>
    </div>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js"
      integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg="
      crossorigin="anonymous"
    ></script>
    <script>
      anchors.add();
    </script>
  </body>
</html>
