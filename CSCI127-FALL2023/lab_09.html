<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Begin Jekyll SEO tag v2.4.0 -->
    <title>LAB 9</title>
    <meta name="generator" content="Jekyll v3.7.3" />
    <meta property="og:title" content="Mahdi Makki, Hunter College" />
    <meta property="og:locale" content="en_US" />
    <link rel="canonical" href="https://mmakki11.github.io/" />
    <meta property="og:url" content="https://mmakki11.github.io/" />
    <meta property="og:site_name" content="mmakki11.github.io" />
    <script type="application/ld+json">
      {
        "name": "mmakki11.github.io",
        "@type": "WebSite",
        "url": "https://mmakki11.github.io/",
        "headline": "Mahdi Makki, Hunter College",
        "@context": "http://schema.org"
      }
    </script>
    <!-- End Jekyll SEO tag -->

    <link
      href="https://fonts.googleapis.com/css?family=Poppins:400"
      rel="stylesheet"
    />

    <!-- MathJax -->
    <script
      type="text/javascript"
      async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML"
    ></script>

    <!--   <link crossorigin="anonymous" media="all" integrity="sha512-Z0JAar9+DkI1NjGVdZr3GivARUgJtA0o2eHlTv7Ou2gshR5awWVf8QGsq11Ns9ZxQLEs+G5/SuARmvpOLMzulw==" rel="stylesheet" href="https://assets-cdn.github.com/assets/frameworks-95aff0b550d3fe338b645a4deebdcb1b.css" />
    -->
    <!--   <link crossorigin="anonymous" media="all" integrity="sha512-yv+kWn8ewbavFKfvLZifQplJ0chJ6H894rDwGVvn0LtaG80VxAQmPt8pRMMOSlGNSiPwZEDSVzZjyOOiVe0eyA==" rel="stylesheet" href="https://assets-cdn.github.com/assets/github-37504d684728c80db863d719b4ac6781.css" />
    -->
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      <style>
        table {
          border-collapse: collapse;
        }
        table,
        td,
        th {
          text-align: left;
          padding: 8px;
          padding-bottom: 6px;
          border: 1px solid #dee1e4;
        }
        tr:nth-child(even) {
          background-color: #fafafa;
        }
        tr:nth-child(odd) {
          background-color: #ffffff;
        }
        hr.style-six {
          border: 0;
          height: 0;
          border-top: 1px solid rgba(0, 0, 0, 0.1);
          border-bottom: 1px solid rgba(255, 255, 255, 0.3);
        }
        a:link {
          text-decoration: none;
        }
        a:visited {
          text-decoration: none;
          color: blue;
        }
        a:hover {
          text-decoration: none;
        }
        a:active {
          text-decoration: none;
        }
      </style>

      <h2 id="lab-9">LAB 9</h2>

      <p>
        Today’s lab will focus on mapping data, using pandas, numpy, and folium.
      </p>

      <p>
        Software tools needed: web browser and Python IDLE programming
        environment with the pandas, numpy, and folium package installed.
      </p>

      <h3 id="in-class-quiz">In-class Quiz</h3>

      <p>
        During lab, there is a <a href="quizzes.html">quiz</a>. The password to
        access the quiz will be given during lab. To complete the quiz, log on
        to Blackboard (see <a href="lab_01.html">Lab 1</a> for details on using
        Blackboard).
      </p>

      <h3 id="world-maps">World Maps</h3>

      <p>
        We are going to use Python to make maps. Let’s start by mapping cities
        of the world. Locations in the world are usually indicated by their
        latitude and longitude.
      </p>

      <ul>
        <li>
          <strong>Latitude</strong> measures the number of degrees north or
          south of the equator. When written as a number, it ranges from -90
          (the south pole) to +90 (the north pole).
        </li>
        <li>
          <strong>Longitude</strong> measures the number of degrees east or west
          of the prime meridian. When written as a number, it ranges from -180
          to +180.
        </li>
      </ul>

      <p>
        We will use those ranges to be our coordinates: (-90, -180) to (90,180).
        Let’s map some cities:
      </p>

      <p>
        In the trinket below, map the following cities (GIS coordinates are
        rounded to the nearest whole number):
      </p>

      <ul>
        <li>New York City (longitude: -74, latitude: 41),</li>
        <li>Los Angeles (longitude: -118, latitude: 34),</li>
        <li>Paris, France (longitude: 2, latitude:49),</li>
        <li>Tokyo, Japan (longitude: 140, latitude: 35), and</li>
        <li>Rio de Janeiro, Brazil (longitude: -43, latitude: -23) .</li>
      </ul>

      <iframe
        width="100%"
        height="600"
        frameborder="1"
        src="https://trinket.io/embed/python/7705126110?start=result"
      ></iframe>
      <p><br /></p>

      <h3 id="folium">Folium</h3>

      <p>
        <a href="https://pypi.python.org/pypi/folium">Folium</a> is a Python
        package that uses the javascript
        <a href="http://leafletjs.com">Leaflet.js</a> library to make beautiful
        interactive maps. Instead of popping up a matplotlib window, folium
        creates an <strong>.html</strong> file that you can open (and view
        interactively) with a browser. After the program runs, open the
        corresponding html file in a web browser to see your map.
      </p>

      <p>
        (Folium is installed on the lab machines, To check to see if your home
        machine has it, type at the Python prompt:
        <code class="language-plaintext highlighter-rouge">import folium</code
        ><br />
        If you get an error, go to the terminal, and download it:
      </p>

      <div class="language-plaintext highlighter-rouge">
        <div class="highlight">
          <pre class="highlight"><code>pip install folium
</code></pre>
        </div>
      </div>

      <p>and the package will download and install.)</p>

      <h4 id="our-first-map">Our First Map</h4>

      <iframe
        width="100%"
        height="400"
        frameborder="1"
        src="world.html"
      ></iframe>
      <p><br /></p>

      <p>To make a map in folium, the process is:</p>

      <ul>
        <li>Write a program in Python, using folium.</li>
        <li>
          Run the program, which outputs an
          <code class="language-plaintext highlighter-rouge">.html</code> file.
        </li>
        <li>
          Open the
          <code class="language-plaintext highlighter-rouge">.html</code> file
          in a browser.
        </li>
      </ul>

      <p>Here’s our first program:</p>

      <div class="language-plaintext highlighter-rouge">
        <div class="highlight">
          <pre
            class="highlight"
          ><code>#Import the folium package for making maps
import folium

#Create a map, centered (0,0), and zoomed out a bit:
mapWorld = folium.Map(location=[0, 0],zoom_start=3)

#Save the map:
mapWorld.save(outfile='tempMap.html')
</code></pre>
        </div>
      </div>

      <p>
        Save this file and run it. It will create a file called tempMap.html.
        Open your favorite browser (Chrome, Firefox, IE, etc.) and choose “Open
        File” and then choose the file tempMap.html. You should see a map of the
        world.
      </p>

      <h4 id="map-of-new-york-city">Map of New York City</h4>

      <p>
        Let’s make another map, focused on New York City. To do that, when we
        set up the map object, we need to reset the location to New York City
        and the increase the zoom level:
      </p>

      <div class="language-plaintext highlighter-rouge">
        <div class="highlight">
          <pre class="highlight"><code>import folium

mapCUNY = folium.Map(location=[40.75, -74.125], zoom_start=10)
</code></pre>
        </div>
      </div>

      <p>Let’s add in a marker for Hunter College:</p>

      <div class="language-plaintext highlighter-rouge">
        <div class="highlight">
          <pre
            class="highlight"
          ><code>folium.Marker(location = [40.768731, -73.964915], popup = "Hunter College").add_to(mapCUNY)
</code></pre>
        </div>
      </div>

      <p>
        and create the
        <code class="language-plaintext highlighter-rouge">.html</code> file:
      </p>

      <div class="language-plaintext highlighter-rouge">
        <div class="highlight">
          <pre class="highlight"><code>mapCUNY.save(outfile='nycMap.html')
</code></pre>
        </div>
      </div>

      <p>
        Save your commands to a file and run via IDLE. Your program will create
        an HTML file called, nycMap.html. Open it in your favorite browser to
        make sure it creates a map of NYC with a marker for Hunter College. When
        you have a running program, see the
        <a href="assignments.html">Programming Problem List</a>.
      </p>

      <h3 id="plotting-from-files">Plotting from Files</h3>

      <p>
        We can combine the mapping of folium with the tools we have used for CSV
        files.
      </p>

      <iframe
        width="100%"
        height="400"
        frameborder="1"
        src="cunyLocations.html"
      ></iframe>
      <p><br /></p>

      <p>
        Let’s make an interactive map of the CUNY campuses. We can download a
        CSV file from data.ny.gov:
      </p>

      <ul>
        <li>
          <a
            href="https://data.ny.gov/Education/City-University-of-New-York-CUNY-University-Campus/i5b5-imzn/data"
            >CUNY Campuses</a
          >
        </li>
      </ul>

      <p>
        (Export as a <strong>.csv</strong> file and save in the same directory
        as your programs. ) Open the file to make sure you have all the lines
        (should be 23) and to check if the column headings occur in the first
        row (they do, so no need to skip rows when reading in the file).
      </p>

      <p>
        Let’s use Pandas to read in the file. We will need to import
        <code class="language-plaintext highlighter-rouge">pandas</code> and
        <code class="language-plaintext highlighter-rouge">folium</code>:
      </p>

      <div class="language-plaintext highlighter-rouge">
        <div class="highlight">
          <pre class="highlight"><code>import folium
import pandas as pd
</code></pre>
        </div>
      </div>

      <p>
        To read in the CSV file, we’ll use pandas’ CSV reader. We’ll print out
        the campus locations to make sure that all were read in:
      </p>

      <div class="language-plaintext highlighter-rouge">
        <div class="highlight">
          <pre class="highlight"><code>cuny = pd.read_csv('cunyLocations.csv')
print (cuny["Campus"])
</code></pre>
        </div>
      </div>

      <p>
        Note: we saved our CSV file to
        <code class="language-plaintext highlighter-rouge"
          >cunyLocations.csv</code
        >. If you saved it to a different name, change the input parameters for
        <code class="language-plaintext highlighter-rouge">read_csv()</code> to
        the name of your file.
      </p>

      <p>Next, let’s set up a map, centered on Hunter College:</p>

      <div class="language-plaintext highlighter-rouge">
        <div class="highlight">
          <pre
            class="highlight"
          ><code>mapCUNY = folium.Map(location=[40.768731, -73.964915])
</code></pre>
        </div>
      </div>

      <p>
        We need to add markers for each campus. We’re going to iterate through
        the rows of dataframe to create the markers:
      </p>

      <div class="language-plaintext highlighter-rouge">
        <div class="highlight">
          <pre class="highlight"><code>for index,row in cuny.iterrows():
    lat = row["Latitude"]
    lon = row["Longitude"]
    name = row["Campus"]
    newMarker = folium.Marker([lat, lon], popup=name)
    newMarker.add_to(mapCUNY)
</code></pre>
        </div>
      </div>

      <p>
        For each row in the file, we find the latitude, longitude, and name of
        the campus, and use those to create a new marker which we add to our
        map. We repeat for each row, until we have made markers for all 23
        campuses in the file (after removing the extra rows with empty Latitude/Longitude).
        You can also download the clean file here <a
        href="images/cunyLocations.csv"
        >CUNY Campuses File</a
      >
      </p>

      <p>Lastly, let’s save our map:</p>

      <div class="language-plaintext highlighter-rouge">
        <div class="highlight">
          <pre
            class="highlight"
          ><code>mapCUNY.save(outfile='cunyLocations.html')
</code></pre>
        </div>
      </div>

      <p>
        To view your map, open a browser. From the browser, open the file:
        cunyLocations.html.
      </p>

      <h3 id="command-line-git">Command Line git</h3>

      <p>
        In <a href="lab_08.html">Lab 8</a>, we introduced github which can be
        used to share and store code, websites, etc. (roughly, a “Google Docs”
        for programs). The website for this course as well as all the programs
        are stored in repositories (or “repos”) at github.
      </p>

      <p>
        The github site has both a web browser interface (which we used last
        lab), and the option to use the command line interface to interact with
        the site. For this course, we will only retrieve code from existing
        repos (in future courses, they will introduce how to share your code and
        merge your changes with others).
      </p>

      <p>
        From Program #35 onward, all sample programs are available at the class
        repository (repo):
      </p>

      <blockquote>
        <p>
          <a href="https://github.com/mmakki11/CSCI127"
            >https://github.com/mmakki11/CSCI127</a
          >
        </p>
      </blockquote>

      <p>
        You can access programs by going to the website, or, using the following
        git command at the command line:
      </p>

      <p>git clone https://github.com/mmakki11/CSCI127</p>

      <p>
        This command will make a copy of all the programs in the class repo in
        directory called, csci127, in your current working directory.
      </p>

      <p>
        If you have that directory already and would like to update it with new
        files that have been (we periodically update the repo), you can ‘fetch’
        the changes:
      </p>

      <p>git fetch https://github.com/mmakki11/CSCI127</p>

      <h3 id="whats-next">What’s Next?</h3>

      <p>
        If you finish the lab early, now is a great time to get a head start on
        the programming problems due early next week. There’s instructors to
        help you, and you already have Python up and running. The
        <a href="assignments.html">Programming Problem List</a> has problem
        descriptions, suggested reading, and due dates next to each problem.
      </p>
    </div>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js"
      integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg="
      crossorigin="anonymous"
    ></script>
    <script>
      anchors.add();
    </script>
  </body>
</html>
